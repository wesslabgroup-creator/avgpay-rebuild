var Z=Object.defineProperty;var B=t=>{throw TypeError(t)};var $=(t,e,s)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var N=(t,e,s)=>$(t,typeof e!="symbol"?e+"":e,s),k=(t,e,s)=>e.has(t)||B("Cannot "+s);var a=(t,e,s)=>(k(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Y=(t,e,s,r)=>(k(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);import{v as x,w as q,x as p,y as J,z as F,A as C,h as D,B as K,C as Q,D as V,E as W,a as X,F as j,G as ee,H as te,I as se,J as ae,K as U,L as re,M as ie,P as ne,g as O,N as fe,O as ce,Q as ue,R as he,S as de,T as _e,d as oe,l as le,U as ve,V as be,i as ge,W as Se,X as me,Y as Pe,Z as Ae}from"./CKEiQQoQ.js";var _,o,d,b,A,E,I;class Ee{constructor(e,s=!0){N(this,"anchor");v(this,_,new Map);v(this,o,new Map);v(this,d,new Map);v(this,b,new Set);v(this,A,!0);v(this,E,()=>{var e=x;if(a(this,_).has(e)){var s=a(this,_).get(e),r=a(this,o).get(s);if(r)q(r),a(this,b).delete(s);else{var c=a(this,d).get(s);c&&(a(this,o).set(s,c.effect),a(this,d).delete(s),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),r=c.effect)}for(const[i,f]of a(this,_)){if(a(this,_).delete(i),i===e)break;const n=a(this,d).get(f);n&&(p(n.effect),a(this,d).delete(f))}for(const[i,f]of a(this,o)){if(i===s||a(this,b).has(i))continue;const n=()=>{if(Array.from(a(this,_).values()).includes(i)){var l=document.createDocumentFragment();Q(f,l),l.append(F()),a(this,d).set(i,{effect:f,fragment:l})}else p(f);a(this,b).delete(i),a(this,o).delete(i)};a(this,A)||!r?(a(this,b).add(i),J(f,n,!1)):n()}}});v(this,I,e=>{a(this,_).delete(e);const s=Array.from(a(this,_).values());for(const[r,c]of a(this,d))s.includes(r)||(p(c.effect),a(this,d).delete(r))});this.anchor=e,Y(this,A,s)}ensure(e,s){var r=x,c=V();if(s&&!a(this,o).has(e)&&!a(this,d).has(e))if(c){var i=document.createDocumentFragment(),f=F();i.append(f),a(this,d).set(e,{effect:C(()=>s(f)),fragment:i})}else a(this,o).set(e,C(()=>s(this.anchor)));if(a(this,_).set(r,e),c){for(const[n,u]of a(this,o))n===e?r.unskip_effect(u):r.skip_effect(u);for(const[n,u]of a(this,d))n===e?r.unskip_effect(u.effect):r.skip_effect(u.effect);r.oncommit(a(this,E)),r.ondiscard(a(this,I))}else D&&(this.anchor=K),a(this,E).call(this)}}_=new WeakMap,o=new WeakMap,d=new WeakMap,b=new WeakMap,A=new WeakMap,E=new WeakMap,I=new WeakMap;function ye(t,e,s=!1){D&&X();var r=new Ee(t),c=s?j:0;function i(f,n){if(D){const l=ee(t)===te;if(f===l){var u=se();ae(u),r.anchor=u,U(!1),r.ensure(f,n),U(!0);return}}r.ensure(f,n)}W(()=>{var f=!1;e((n,u=!0)=>{f=!0,i(u,n)}),f||i(!1,null)},c)}let T=!1;function Re(t){var e=T;try{return T=!1,[t(),T]}finally{T=e}}function pe(t,e,s,r){var M;var c=!le||(s&ve)!==0,i=(s&_e)!==0,f=(s&me)!==0,n=r,u=!0,l=()=>(u&&(u=!1,n=f?oe(r):r),n),S;if(i){var z=Pe in t||Ae in t;S=((M=re(t,e))==null?void 0:M.set)??(z&&e in t?h=>t[e]=h:void 0)}var m,L=!1;i?[m,L]=Re(()=>t[e]):m=t[e],m===void 0&&r!==void 0&&(m=l(),S&&(c&&ie(),S(m)));var g;if(c?g=()=>{var h=t[e];return h===void 0?l():(u=!0,h)}:g=()=>{var h=t[e];return h!==void 0&&(n=void 0),h===void 0?n:h},c&&(s&ne)===0)return g;if(S){var G=t.$$legacy;return(function(h,R){return arguments.length>0?((!c||!R||G||L)&&S(R?g():h),h):g()})}var y=!1,P=((s&be)!==0?ge:Se)(()=>(y=!1,g()));i&&O(P);var H=he;return(function(h,R){if(arguments.length>0){const w=R?O(P):c&&i?fe(h):h;return ce(P,w),y=!0,n!==void 0&&(n=w),h}return ue&&y||(H.f&de)!==0?P.v:O(P)})}export{Ee as B,ye as i,pe as p};
